<?php require '../config.php'; require '../includes/header.php'; if(!isset($_SESSION['role'])||$_SESSION['role']!=='staff'){ header('Location: ../login.php'); exit;} $orders=$conn->query('SELECT o.*,u.username,m.item_name FROM orders o JOIN users u ON u.id=o.user_id JOIN menu m ON m.id=o.menu_id ORDER BY o.created_at DESC'); ?>
<div class="card p-3"><h4>All Orders</h4><table class="table"><thead><tr><th>ID</th><th>User</th><th>Item</th><th>Qty</th><th>Total</th><th>Time</th></tr></thead><tbody><?php while($o=$orders->fetch_assoc()): ?><tr><td><?= (int)$o['id'] ?></td><td><?= htmlspecialchars($o['username']) ?></td><td><?= htmlspecialchars($o['item_name']) ?></td><td><?= (int)$o['qty'] ?></td><td><?= number_format($o['total'],2) ?></td><td><?= htmlspecialchars($o['created_at']) ?></td></tr><?php endwhile; ?></tbody></table><a class="btn btn-link" href="dashboard.php">Back</a></div><?php require '../includes/footer.php'; ?>