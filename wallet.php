<?php require '../config.php'; require '../includes/header.php'; if(!isset($_SESSION['role'])||$_SESSION['role']!=='student'){ header('Location: ../login.php'); exit;} $uid=$_SESSION['user_id']; $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $amt=floatval($_POST['amount']??0); if($amt>0){ $st=$conn->prepare('UPDATE users SET wallet=wallet+? WHERE id=?'); $st->bind_param('di',$amt,$uid); $st->execute(); $st->close(); $msg='Added'; } } $bal=$conn->query('SELECT wallet FROM users WHERE id='.(int)$uid)->fetch_assoc()['wallet']; ?>
<div class="card p-3"><h4>Wallet</h4><?php if($msg) echo '<div class="alert alert-success">'.$msg.'</div>'; ?><p>Balance: à§³ <?= number_format($bal,2) ?></p><form method="post" class="row g-2"><div class="col-auto"><input class="form-control" name="amount" type="number" step="0.01" required></div><div class="col-auto"><button class="btn btn-primary">Add</button></div></form><a class="btn btn-link mt-2" href="dashboard.php">Back</a></div><?php require '../includes/footer.php'; ?>