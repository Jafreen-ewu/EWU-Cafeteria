<?php require '../config.php'; require '../includes/header.php'; if(!isset($_SESSION['role'])||$_SESSION['role']!=='student'){ header('Location: ../login.php'); exit;} $items=$conn->query('SELECT * FROM menu WHERE stock>0'); ?>
<div class="card p-3"><h4>Menu</h4><table class="table"><thead><tr><th>Item</th><th>Price</th><th>Stock</th><th>Order</th></tr></thead><tbody><?php while($it=$items->fetch_assoc()): ?><tr class="<?= $it['stock']<10 ? 'table-danger':'' ?>"><td><?=htmlspecialchars($it['item_name'])?></td><td><?=number_format($it['price'],2)?></td><td><?= (int)$it['stock'] ?></td><td><form method="post" action="place_order.php"><input type="hidden" name="menu_id" value="<?= (int)$it['id'] ?>"><input class="form-control d-inline-block" style="width:90px" name="qty" type="number" value="1" min="1"><select name="method" class="form-select d-inline-block" style="width:140px"><option value="WALLET">Wallet</option><option value="CASH">Cash</option></select><button class="btn btn-sm btn-primary">Order</button></form></td></tr><?php endwhile; ?></tbody></table><a class="btn btn-link" href="dashboard.php">Back</a></div><?php require '../includes/footer.php'; ?>