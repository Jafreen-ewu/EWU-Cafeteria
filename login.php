<?php require 'config.php'; require 'includes/header.php'; if($_SERVER['REQUEST_METHOD']==='POST'){ $u=trim($_POST['username']); $p=md5(trim($_POST['password'])); $st=$conn->prepare('SELECT id,username,role FROM users WHERE username=? AND password=?'); $st->bind_param('ss',$u,$p); $st->execute(); $res=$st->get_result(); if($r=$res->fetch_assoc()){ $_SESSION['user_id']=$r['id']; $_SESSION['username']=$r['username']; $_SESSION['role']=$r['role']; if($r['role']==='admin') header('Location: admin/dashboard.php'); elseif($r['role']==='staff') header('Location: staff/dashboard.php'); else header('Location: student/dashboard.php'); exit; } else echo '<div class="alert alert-danger">Invalid login</div>'; } ?>
<div class="row justify-content-center"><div class="col-md-6"><div class="card"><div class="card-body"><h4>Login</h4><form method="post"><input class="form-control mb-2" name="username" placeholder="username"><input class="form-control mb-2" name="password" type="password" placeholder="password"><button class="btn btn-primary">Login</button></form><p class="mt-3 text-muted">Demo users: admin1/admin123, staff1/staff123, student1/student123</p></div></div></div></div>
<?php require 'includes/footer.php'; ?>